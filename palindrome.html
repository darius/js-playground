<html><head>
  <title>A Palindromedary</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head><body>
  <h1>Aloha! Hola!</h1>
  <script>
    // These are filled in by count_big.js, which can take a while to load.
    var NT = 100, vocab = {"the":1}, maxWordLength = 3;
  </script>
  <script src="palindrome.jpp.js"></script>
  <script src="dom.js"></script>

  <form method="get" action="javascript:void(0)">
  <p>I&#8217;m
  a <a href="http://www.ursulakleguin.com/Poetry-Palindromedary.html">palindromedary</a>,
  and I so love palindromes that I&#8217;ll make one out of whatever
  you type. (Its quality will be up to you.)</p>
  <p>Feed me here: <input type="text" id="textfield"/></p>
  </form>

  <p id="yum">
  
    <hr>
    <div id="footer" style="font-size:
    smaller"><a href="http://github.com/darius/js-playground">Source
    code</a> on GitHub. Or
    see <a href="http://www.spinelessbooks.com/2002/deepspeed/index.html">another
    online helper</a> for palindromists.
    <p><em>Copyright &#169; 2010 <a href="http://wry.me/blog/">Darius Bacon</a><br/></em></div>
  <script type="text/javascript">

    var input = $("textfield");
    input.focus();

    function makeYum() {
        $("yum").innerHTML = "Yum! Okay:&nbsp;&nbsp;&nbsp; <span id=\"output\">...</span>";
        makeYum = function () { };
    }

    // Total hack alert: when we're notified of the keypress event,
    // input.value hasn't yet been updated. So we schedule our update
    // for after. Surely there's a better way, such as a different event
    // to react to?

    function updateOutput() {
        makeYum();
        var output = $("output");
        var completed = document.createTextNode(complete(input.value));
        output.replaceChild(completed, output.firstChild);
    }
    function updateOutputSoon(event) {
        setTimeout(updateOutput, 0);
    }
    registerEventHandler(input, "change", updateOutputSoon);
    registerEventHandler(input, "keyup", updateOutputSoon);
    registerEventHandler(input, "keydown", updateOutputSoon);

  </script>
  <script src="count_big.js"></script>
</body></html>
